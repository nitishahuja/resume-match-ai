<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Resume Matcher</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>
  <body>
    <!-- AI-Styled Header with Inline Logo -->
    <div class="header">
      <img
        src="assets/icon.png"
        alt="AI Icon"
        class="ai-logo"
        style="
          height: 40px;
          width: 40px;
          vertical-align: middle;
          margin-right: 10px;
        "
      />
      <h1 style="display: inline; font-size: 1.5em">Resume Matcher AI</h1>
    </div>
    <p class="subtext">Enhancing your resume with AI-powered insights</p>

    <!-- API Key Input Section (Only visible if key is missing) -->
    <div id="apiKeySection">
      <label for="apiKeyInput" class="file-label"
        >Enter Your OpenAI API Key:</label
      >
      <input type="password" id="apiKeyInput" placeholder="sk-xxxxxxxxxx" />
      <button id="saveApiKey">Save Key</button>
      <p id="apiKeyStatus"></p>
    </div>

    <!-- Resume Upload Section (Hidden until API Key is set) -->
    <div id="resumeSection" style="display: none">
      <label for="resumeUpload" class="file-label">Upload Resume:</label>
      <input type="file" id="resumeUpload" accept=".txt, .pdf" />
      <p id="resumeStatus">No resume uploaded</p>
      <button id="changeResumeBtn" style="display: none">Change Resume</button>
      <button id="matchBtn">🔍 Match Resume</button>
      <button id="updateApiKey">🔑 Change API Key</button>
    </div>

    <!-- Loading Animation -->
    <div id="loadingSpinner" class="spinner" style="display: none"></div>

    <!-- Results Section -->
    <h3>Results:</h3>
    <div id="matchScore" class="match-score">Match Score: --%</div>

    <div class="keywords-section">
      <h4>✅ Matched Keywords:</h4>
      <ul id="matchedKeywords" class="matched-list"></ul>
    </div>

    <div class="keywords-section missing">
      <h4>❌ Missing Keywords:</h4>
      <ul id="missingKeywords" class="missing-list"></ul>
    </div>

    <!-- Resume Improvement Section -->
    <textarea
      id="updatedResume"
      placeholder="Your improved resume will appear here..."
    ></textarea>

    <!-- Footer -->
    <div class="footer">
      <p>
        Powered by
        <a href="https://www.linkedin.com/in/nitishahuja" target="_blank"
          >Nitish Ahuja</a
        >
        | <a href="https://nitishahuja.com/" target="_blank">Learn More</a> |
        <a href="https://buymeacoffee.com/nitishahuja" target="_blank"
          >☕ Buy Me a Coffee</a
        >
      </p>
    </div>

    <!-- Ensure scripts load in correct order -->
    <script src="libs/pdf.min.js"></script>
    <script type="module" src="popup.js"></script>
  </body>
</html>
