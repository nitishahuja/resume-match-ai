<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Resume Matcher</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>
  <body>
    <!-- AI-Styled Header with Inline Logo -->
    <div class="header">
      <img
        src="assets/icon.png"
        alt="AI Icon"
        class="ai-logo"
        style="
          height: 40px;
          width: 40px;
          vertical-align: middle;
          margin-right: 10px;
        "
      />
      <h1 style="display: inline; font-size: 1.5em">Resume Matcher AI</h1>
    </div>
    <p class="subtext">Enhancing your resume with AI-powered insights</p>

    <!-- API Key Input Section (Only visible if key is missing) -->
    <div id="apiKeySection">
      <label for="apiKeyInput" class="file-label"
        >Enter Your OpenAI API Key:</label
      >
      <input type="password" id="apiKeyInput" placeholder="sk-xxxxxxxxxx" />
      <button id="saveApiKey">Save Key</button>
      <p id="apiKeyStatus"></p>
    </div>

    <!-- Resume Upload Section -->
    <div id="resumeSection" style="display: none">
      <label for="resumeUpload" class="file-label">Upload Resume:</label>
      <input type="file" id="resumeUpload" accept=".txt, .pdf" />
      <p id="resumeStatus">No resume uploaded</p>

      <!-- Match Resume (Primary Button) -->
      <button id="matchBtn" class="primary-btn">🔍 Match Resume</button>

      <!-- Small side links for Change API Key & Change Resume -->
      <div class="side-actions">
        <a href="#" id="updateApiKey">🔑 Change API Key</a>
        <a href="#" id="changeResumeBtn" style="display: none"
          >📄 Change Resume</a
        >
      </div>
    </div>

    <!-- Loading Animation -->
    <div id="loadingSpinner" class="spinner" style="display: none"></div>

    <!-- RESULTS SECTION -->
    <div class="results-container">
      <h2>📊 Match Score & Fit Recommendation</h2>

      <!-- Score Display -->
      <div id="matchScoreContainer">
        <div id="matchScore" class="match-score">--%</div>
        <div id="matchCategory" class="match-category">No analysis yet</div>
      </div>
    </div>

    <!-- Matched & Missing Skills Section -->
    <div class="keywords-container">
      <div class="keywords-section">
        <h4>✅ Matched Skills</h4>
        <ul id="matchedKeywords" class="matched-list"></ul>
      </div>

      <div class="keywords-section missing">
        <h4>❌ Missing Skills</h4>
        <ul id="missingKeywords" class="missing-list"></ul>
      </div>
    </div>

    <!-- Resume Snippet Modifications -->
    <div class="resume-improvements">
      <h3>📌 Resume Snippet Improvements</h3>
      <textarea id="resumeSnippets" class="readonly-text" readonly>
No suggestions yet.</textarea
      >
      <button id="copyResumeSnippets" class="copy-btn">📋 Copy Snippets</button>
    </div>

    <!-- Insights Section -->
    <div class="insights-section">
      <h3>💡 Key Insights</h3>
      <textarea id="resumeInsights" class="readonly-text" readonly>
No insights available.</textarea
      >
      <button id="copyInsights" class="copy-btn">📋 Copy Insights</button>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>
        Powered by
        <a href="https://www.linkedin.com/in/nitishahuja" target="_blank"
          >Nitish Ahuja</a
        >
        | <a href="https://nitishahuja.com/" target="_blank">Learn More</a> |
        <a href="https://buymeacoffee.com/nitishahuja" target="_blank"
          >☕ Buy Me a Coffee</a
        >
      </p>
    </div>

    <!-- Ensure scripts load in correct order -->
    <script src="libs/pdf.min.js"></script>
    <script type="module" src="popup.js"></script>
  </body>
</html>
